<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=, initial-scale=1.0" />
  <!-- <link rel="stylesheet" href="style.css" /> -->
  <script src="script_voltas_da_corrida.js"></script>
  <title>Turfe Amigo</title>
</head>

<body>

  <div class="container">

    <div class="tudo">

      <div class="inputs">
        <h2>TURFE</h2>
        <input id="quantidade_input" min="2" max="6" onkeyup="receber_limite()" type="text"
          placeholder="Quantidade de cavalos">

        <br>

        <input id="nome_input" type="text" placeholder="Nome">

        <br>

        <input id="voltas_input" type="text" placeholder="Número de voltas">

      </div>
      <div class="botao">
        <div class="button1">
          <button onclick="dar_volta()">JOGAR</button>
        </div>
        <div class="button2">
          <button onclick="registrar_nome()">NOMEAR</button>
        </div>
      </div>
    </div>




    <!-- <div class="imagem" id="imgCavalinho" style="display: block;">
      <img src="cavalinho3.jpg" alt="" srcset="">
    </div> -->

    <div class="container2" id="container_2" style="display: none;">

      <div id="resultados_da_volta" class="voltas"></div>

    </div>


</body>

</html>

<script>


  var cavalo1 = [];
  var cavalo2 = [];
  var cavalo3 = [];
  var cavalo4 = [];
  var cavalo5 = [];
  var cavalo6 = [];

  var soma1 = Number(0);
  var soma2 = Number(0);
  var soma3 = Number(0);
  var soma4 = Number(0);
  var soma5 = Number(0);
  var soma6 = Number(0);
  var quantidade_limite_registros = 0;

  async function voltas() {

    for (var numero_da_volta = 1; numero_da_volta <= voltas_input.value; numero_da_volta++) {
      Number(numero_da_volta);
      await new Promise(obtenha => {

        for (let i = 1; i <= registro_de_cavalos.length; i++) {

          if (i == 1) {
            cavalo1.push((Math.random() * 2 + 7));
            soma1 += Number(cavalo1[cavalo1.length - 1]);
          }
          else if (i == 2) {
            cavalo2.push((Math.random() * 2 + 7));
            soma2 += Number(cavalo2[cavalo2.length - 1]);
          }
          else if (i == 3) {
            cavalo3.push((Math.random() * 2 + 7));
            soma3 += Number(cavalo3[cavalo3.length - 1]);
          }
          else if (i == 4) {
            cavalo4.push((Math.random() * 2 + 7));
            soma4 += Number(cavalo4[cavalo4.length - 1]);
          }
          else if (i == 5) {
            cavalo5.push((Math.random() * 2 + 7));
            soma5 += Number(cavalo5[cavalo5.length - 1]);
          }
          else if (i == 6) {
            cavalo6.push((Math.random() * 2 + 7));
            soma6 += Number(cavalo6[cavalo6.length - 1]);
          }

        }

        resultados_da_volta.innerHTML += `<h2>Volta ${numero_da_volta}</h2><br><br>`;
        for (var numero_do_cavalo = 1; numero_do_cavalo <= registro_de_cavalos.length; numero_do_cavalo++) {

          if (numero_do_cavalo == 1) {

            resultados_da_volta.innerHTML += `
                        ${registro_de_cavalos[numero_do_cavalo - 1]} - tempo ${Number(cavalo1[numero_da_volta - 1]).toFixed(1)} - soma ${Number(soma1).toFixed(1)} <br>
                        <br>`;

          }
          else if (numero_do_cavalo == 2) {

            resultados_da_volta.innerHTML += `
                        ${registro_de_cavalos[numero_do_cavalo - 1]} - tempo ${Number(cavalo2[numero_da_volta - 1]).toFixed(1)} - soma ${Number(soma2).toFixed(1)} <br>
                        <br>`;

          }
          else if (numero_do_cavalo == 3) {

            resultados_da_volta.innerHTML += `
                        ${registro_de_cavalos[numero_do_cavalo - 1]} - tempo ${Number(cavalo3[numero_da_volta - 1]).toFixed(1)} - soma ${Number(soma3).toFixed(1)} <br>
                        <br>`;

          }
          else if (numero_do_cavalo == 4) {

            resultados_da_volta.innerHTML += `
                        ${registro_de_cavalos[numero_do_cavalo - 1]} - tempo ${Number(cavalo4[numero_da_volta - 1]).toFixed(1)} - soma ${Number(soma4).toFixed(1)} <br>
                        <br>`;

          }
          else if (numero_do_cavalo == 5) {

            resultados_da_volta.innerHTML += `
                        ${registro_de_cavalos[numero_do_cavalo - 1]} - tempo ${Number(cavalo5[numero_da_volta - 1]).toFixed(1)} - soma ${Number(soma5).toFixed(1)} <br>
                        <br>`;

          }
          else if (numero_do_cavalo == 6) {

            resultados_da_volta.innerHTML += `
                        ${registro_de_cavalos[numero_do_cavalo - 1]} - tempo ${Number(cavalo6[numero_da_volta - 1]).toFixed(1)} - soma ${Number(soma6).toFixed(1)} <br>
                        <br>`;

          }

        }

        setInterval(obtenha, 5000);
      })
    }

    var quantidade_limite_registros = 0;
    var registro_de_cavalos = [];

    function receber_limite() {
      quantidade_limite_registros = Number(quantidade_input.value)
    }

    function registrar_nome() {
      if (nome_input.value == '') {
        alert('Insira o nome do cavalo')
      }
      else if (quantidade_limite_registros > registro_de_cavalos.length) {
        registro_de_cavalos.push(nome_input.value);
        nome_input.value = '';
      }
      else {
        alert('Limite de nomes alcançado')
        nome_input.value = ''
      }
    }
 
  function dar_volta() {
      if (quantidade_limite_registros < 2 || quantidade_limite_registros > 6) {
        quantidade_input.value = ''
        alert(`Valor inválido, digite um número entre 2 e 6`)
        return;
      }
      else {
        imgCavalinho.style.display = 'none';

        container_2.style.display = 'block';
        voltas();
      }
    }
  }
</script>